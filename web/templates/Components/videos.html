{{ define "single" }}
<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no"
		/>

		<!-- Bootstrap CSS -->
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
			integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
			crossorigin="anonymous"
		/>

		<link rel="stylesheet" href="/static/css/videos.css" />
		<title>Videos!</title>
		<link
			rel="icon"
			type="image/svg+xml"
			sizes="530x530"
			href="/static/img/Jizzberry%20Logo.svg?h=ae70653461c1cb2d4dc19d01887c9402"
		/>
		<link rel="stylesheet" href="/static/vendor/plyr/plyr.css" />
		<script src="https://cdn.plyr.io/3.6.2/plyr.polyfilled.js"></script>
	</head>

	<body>
		{{template "topbar"}}

		<!-- ########## BELOW TOP-NAV STARTS ########## -->
		<main style="position: relative; top: 59px;">

			{{template "sidenav"}}

			<!-- ########## MAIN-CONTENT STARTS ########## -->
			<div
					id="content"
					style="position: absolute; padding: 0 3rem 0 13rem; width: 100%;"
					class="main-content"
					>
				<div class="pt-5 pl-5">
					<div class="row">
						<div class="col-md-8">
							<!-- ########## MAIN BIG VIDEO STARTS ########## -->
								<video id="videoPlayer" crossorigin playsinline controls data-poster="/thumbnails/p{{ (index .Files 0).GeneratedID }}.png">
									<source src="/Jizzberry/stream/{{ (index .Files 0).GeneratedID }}" type="video/mp4"/>
									Your browser does not support HTML5 video.
								</video>
							<!-- ########## MAIN BIG VIDEO ENDS ########## -->
							<div
								class="d-flex flex-row justify-content-between mb-4 mt-3 ml-3" style="width: 100%; padding-inline-end: 15px;">
								<h4 style="font-family: Raleway, sans-serif; font-weight: 600;">
								{{ (index .Files 0).FileName }}
								</h4>
								<button style="border:none; background:transparent; cursor: pointer;" id="parser-toggle"><span><i class="fas fa-edit"></i></span></button>
							</div>
							<div id="metadata-viewer">
								<div class="video-description">
									<div class="p-tags">
										<p>Cast: {{ .ActorList }}</p>
										<p>Tags: {{ (index .Files 0).Tags }}</p>
										<p>Studio: {{ (index .Files 0).Studios }}</p>
									</div>
								</div>
								<div class="video-description">
									<div class="p-tags">
										<p>Path: {{ (index .Files 0).FilePath }}</p>
										<p>Date Created : {{ (index .Files 0).DateCreated }}</p>
										<p>Size: {{ (index .Files 0).FileSize }}</p>
										<p>Length: {{ (index .Files 0).Length }}</p>
									</div>
								</div>
							</div>
							<!-- ########## FORM STARTS ########## -->
							<form class="d-none" id="metadata-parser">
								<div class="form-group d-flex">
									<label for="title">Title</label>
									<input
										class="form-control"
										data-toggle="modal"
										data-target="#queryModal"
										type="text"
										name="title"
										id="metadata-title"
										placeholder="Title"
										onclick="fetchQueryResults('Mila Azul')"
										value="{{ (index .Files 0).FileName }}"
									/>
								</div>
								<div class="form-group d-flex">
									<label for="url">URL</label>
									<input
										type="url"
										name="url"
										id="metadata-url"
										placeholder="URL"
										class="form-control"
									/>
								</div>
								<div class="form-group d-flex">
									<label for="date">Date</label>
									<input
										type="text"
										name="date"
										id="metadata-date"
										class="form-control"
										value="{{ (index .Files 0).DateCreated }}"
									/>
								</div>
								<div class="form-group d-flex">
									<label for="studio">Studio</label>
									<input
										type="search"
										data-toggle="modal"
										data-target="#multiselectorModal"
										onclick="openStudiosModal();"
										class="form-control"
										name="studio"
										id="metadata-studio"
										placeholder="Search..."
										readonly
									/>
								</div>
								<div class="form-group d-flex">
									<label for="performers">Actors</label>
									<input
										type="text"
										data-toggle="modal"
										data-target="#multiselectorModal"
										onclick="openActorsModal();"
										class="form-control"
										name="performers"
										id="metadata-actor"
										placeholder="Select actors..."
										readonly
									/>
								</div>
								<div class="form-group d-flex">
									<label for="tag">Tags</label>
									<input
										type="text"
										data-toggle="modal"
										data-target="#multiselectorModal"
										onclick="openTagsModal();"
										class="form-control"
										placeholder="Select tags..."
										name="tag"
										id="metadata-tag"
										readonly
									/>
								</div>
								<button onclick="saveMetadata();" type="button">save</button>
							</form>

							<!-- ########## FORM ENDS ########## -->
						</div>

						<!-- ########## VIDEO LIST RIGHT COLUMN STARTS ########## -->

						<div class="video-list col-md-4 d-flex flex-column">
							<!-- ########## INDIVIDUAL VIDEO IN LIST STARTS ########## -->
							{{range $val := .UpNext}}
							<a href="/Jizzberry/scene/{{ $val.GeneratedID }}">
								<div class="card mb-3">
									<div class="row no-gutters">
										<div class="col-md-5 py-1 pl-1 pr-2">
											<img
												class="card-img img-fluid"
												src="/thumbnails/{{ $val.GeneratedID }}.png"
												onerror="this.src='/static/img/txt-logo.svg'"
											/>
										</div>
										<div class="col-md-7">
											<div class="card-body p-0">
												<h4 class="card-title">{{ $val.FileName }}</h4>
												<p class="card-text">
													{{ $val.Studios }}
												</p>
											</div>
										</div>
									</div>
								</div>
							</a>
							{{ end }}
							<!-- ########## INDIVIDUAL VIDEO IN LIST ENDS ########## -->
						</div>
						<!-- ########## VIDEO LIST RIGHT COLUMN ENDS ########## -->
					</div>
				</div>
			</div>
			<!-- ########## MAIN-CONTENT ENDS ########## -->
		</main>

		{{ template "multiselector_modal" }}
		{{ template "query_modal" }}

		<!-- ##################################################### -->
		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script
				src="https://code.jquery.com/jquery-3.5.1.min.js"
				integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
				crossorigin="anonymous">
		</script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
			integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
			crossorigin="anonymous"
		></script>
		<script
			src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
			integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"
			integrity="sha256-KzZiKy0DWYsnwMF+X1DvQngQ2/FxF7MF3Ff72XcpuPs="
			crossorigin="anonymous"
		></script>
		<script src="https://twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.js"></script>
		<script src="/static/js/search.js"></script>
		<script src="/static/js/videos.js"></script>
		<script src="/static/js/query.js"></script>

		<script>
			const player = new Plyr(document.getElementById('videoPlayer'));


		</script>
	</body>
</html>
{{ end }}
